<?xml version="1.0" encoding="utf-8"?>

<!-- For more information on using web.config transformation visit https://go.microsoft.com/fwlink/?LinkId=125889 -->

<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <system.webServer>
    <rewrite>
      <rules>
        <rule name="Redirect to Azure Blob Storage" xdt:Transform ="Insert">
          <match url="^storage/(.*)$"/>
          <action type="Redirect" url="https://simoonastaging.blob.core.windows.net/{R:1}" redirectType="Permanent" />
        </rule>
      </rules>
    </rewrite>
  </system.webServer>
  <connectionStrings xdt:Transform="Replace">
    <remove name="LocalSqlServer"/>
    <add name="test" connectionString="#{TestConnectionString}#" providerName="System.Data.SqlClient"/>
    <add name="BackgroundJobs" connectionString="#{BackgroundJobsConnectionString}#" providerName="System.Data.SqlClient"/>
    <add name="StorageConnectionString" connectionString="#{StorageConnectionString}#"/>
  </connectionStrings>
  <system.net>
    <mailSettings xdt:Transform="Replace">
        <smtp from="#{SmtpFrom}#">
          <network host="#{SmtpHost}#" userName="#{SmtpUserName}#" password="#{SmtpPassword}#" port="#{SmtpPort}#" />
        </smtp>
    </mailSettings>
  </system.net>
</configuration>